{% extends "base.html" %} 

{% load get_range %}

{% block content %}

<script>
	$(document).ready(function () {
		$("#workout-nav").addClass("active");
		
		$('a').click(function(e) {
			var elem = $($(e.target)[0]).parent();
			if ($(elem).attr('data-toggle') === 'modal') {
				e.preventDefault();
				$('#modal div.modal-content').load($(elem).attr('href'));
			}
		});
	});

</script>



<div class="row black-on-white">
	
<ol class="breadcrumb">
  <li><a href="/">Home</a></li>
  <li><a href="/workout/">Performance Workout</a></li>
  <li><a href="/workout/workouts/">My Workouts</a></li>
  <li class="active">{{  object.name }}</li>
</ol>


	{% if request.GET.alert %}
	<div class="col-md-12">
		<div class="alert alert-danger" role="alert">
			{{ request.GET.alert }}
			<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
			</button>
		</div>
	</div>
	{% endif %} {% if request.GET.success %}
	<div class="col-md-12">
		<div class="alert alert-success" role="alert">
			{{ request.GET.success }}
			<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
			</button>
		</div>
	</div>
	{% endif %}

	<div class="col-md-12">
		
	

		
		
	<h3>{{  object.name }} <span class=" pull-right"></h3>	

	<!-- FIRST TABLE -->
  		<div class="row">
  			<div class="col-sm-12 column" id='cats'>
				
					{% csrf_token %}
						{% for week in object.fullsheet %}
						
						{% ifequal week.workout_week "1" %}
						<table class="table table-bordered table-striped table-hover table-condensed">
						<thead>
							<tr>
								<th class="col-xs-4">
									Name
								</th>
								<th class="col-xs-1">
									Week
								</th>
								<th class="col-xs-1">
									Sets x Reps
								</th>
								<th class="col-xs-6">
								 	Results
								</th>
							</tr>
						</thead>
						{% endifequal %}
			
  						<tr>
							<td class="col-xs-4">
								{{ week.group }}{{ week.group_order }}) <a href="{{ week.name.id }}">{{ week.name }}</a>
								
								
								<span class="pull-right"><a data-toggle="modal" href="{% url 'workout_week_view' pk=week.id %}" data-target="#modal"><span class="glyphicon glyphicon-edit"></span> </a></span> &nbsp;
								
								{% if week.rest_time %}
								<span class="pull-right">
									<a class="popover-btn" data-toggle="popover" title="Additional Info" data-content="{{ week.rest_time }}{% if week.tempo %} / {{ week.tempo }}{% endif %}"><span class="glyphicon glyphicon-info-sign"></span></a>										
									</a>
								</span>
								{% endif %}
							
  							</td>
  							<td class="col-xs-1">
  								{{ week.workout_week }}
  							</td>				
  							<td class="col-xs-1">
								{% if week.set_number %}{{ week.set_number }}{% endif %}{% if week.reps %} x {{ week.reps }}{% endif %}
  							</td>
  							<td class="col-xs-6">
								<table class="smalltable-bordered table-condensed">
									<tr class="row">
										<td class="col-xs-2">1</td>
										<td class="col-xs-2">2</td>
										<td class="col-xs-2">3</td>
										<td class="col-xs-2">4</td>
										<td class="col-xs-2">5</td>
										<td class="col-xs-2">6</td>
									</tr>
									<tr id="set_{{week.id}}" name="set_{{week.id}}" class="row">
										<td id="set_{{week.id}}_1" class="col-xs-2">-</td>
										<td id="set_{{week.id}}_2" class="col-xs-2">-</td>
										<td id="set_{{week.id}}_3" class="col-xs-2">-</td>
										<td id="set_{{week.id}}_4" class="col-xs-2">-</td>
										<td id="set_{{week.id}}_5" class="col-xs-2">-</td>
										<td id="set_{{week.id}}_6" class="col-xs-2">-</td>
									</tr>
								</table>
  							</td>
							<script>
									$(function() {
										showWeeks('{{week.set_number}}', '{{week.id}}', '{{week.result_array}}');
									});
								</script>
  						</tr>
							
								
							
						{% ifequal week.workout_week "4" %}
							</table>
						{% endifequal %}	
				
						{% endfor %}
  				

  			</div>

	</div>
</div>
</div>

	
<script>
	
	function showWeeks(set_number, week, result_array){
		// get previous values and fill out form...
		if(!result_array){
			set_string = "<td colspan='6'></td>";
		} else {
			vals = result_array.split("|");
			$.each(vals, function( index, value ) {
				var elem = document.getElementById('set_' + week + "_" + (index+1));
				elem.innerHTML = value;
			});
		}
	}
	
	$(document).ready(function() {
		$('.popover-btn').popover()
	});
</script>

{% endblock %}